import dotenv from 'dotenv';
import connectDB from './config/db.js';
import VendorFormSection from './models/VendorFormSection.js';
import VendorFormConfig from './models/VendorFormConfig.js';

dotenv.config();

// ==========================================
// SEED DATA: Form Sections
// ==========================================
const sections = [
  {
    sectionKey: 'restaurant_info',
    sectionLabel: 'Restaurant Information',
    sectionDescription: 'Provide complete information about the restaurant',
    order: 1,
    stepNumber: 1,
    isActive: true,
    visibleTo: ['agent', 'employee'],
  },
  {
    sectionKey: 'login_info',
    sectionLabel: 'Restaurant Login Information',
    sectionDescription: 'Login credentials for restaurant admin',
    order: 2,
    stepNumber: 1,
    isActive: true,
    visibleTo: ['agent', 'employee'],
  },
  {
    sectionKey: 'category_info',
    sectionLabel: 'Restaurant Category Information',
    sectionDescription: 'Select applicable food categories',
    order: 3,
    stepNumber: 1,
    isActive: true,
    visibleTo: ['agent', 'employee'],
  },
  {
    sectionKey: 'address_info',
    sectionLabel: 'Restaurant Address Information (Google Maps)',
    sectionDescription: 'Provide accurate location details',
    order: 4,
    stepNumber: 1,
    isActive: true,
    visibleTo: ['agent', 'employee'],
  },
  {
    sectionKey: 'delivery_charge_type',
    sectionLabel: 'Select Delivery Charge Type',
    sectionDescription: 'Choose delivery charge calculation method',
    order: 5,
    stepNumber: 1,
    isActive: true,
    visibleTo: ['agent', 'employee'],
  },
  {
    sectionKey: 'delivery_info',
    sectionLabel: 'Restaurant Delivery Information',
    sectionDescription: 'Delivery charges and constraints',
    order: 6,
    stepNumber: 1,
    isActive: true,
    visibleTo: ['agent', 'employee'],
  },
  {
    sectionKey: 'commission_info',
    sectionLabel: 'Restaurant Admin Commission',
    sectionDescription: 'Platform commission rate',
    order: 7,
    stepNumber: 1,
    isActive: true,
    visibleTo: ['agent', 'employee'],
  },
  {
    sectionKey: 'payout_info',
    sectionLabel: 'Restaurant Payout Information',
    sectionDescription: 'Bank and payment details',
    order: 8,
    stepNumber: 1,
    isActive: true,
    visibleTo: ['agent', 'employee'],
  },
  {
    sectionKey: 'review_info',
    sectionLabel: 'Review & Follow-up Details',
    sectionDescription: 'Complete this section before submitting',
    order: 1,
    stepNumber: 2,
    isActive: true,
    visibleTo: ['agent', 'employee'],
  },
];

// ==========================================
// SEED DATA: Form Fields
// ==========================================
const fields = [
  // ====== RESTAURANT INFO ======
  {
    section: 'restaurant_info',
    sectionLabel: 'Restaurant Information',
    label: 'Restaurant Name',
    fieldKey: 'restaurantName',
    fieldType: 'text',
    placeholder: 'Enter restaurant name',
    required: true,
    order: 1,
    visibleTo: ['agent', 'employee'],
    isActive: true,
    isSystemField: true,
  },
  {
    section: 'restaurant_info',
    sectionLabel: 'Restaurant Information',
    label: 'Restaurant Image',
    fieldKey: 'restaurantImage',
    fieldType: 'file',
    placeholder: '',
    required: true,
    order: 2,
    visibleTo: ['agent', 'employee'],
    isActive: true,
    isSystemField: true,
  },
  {
    section: 'restaurant_info',
    sectionLabel: 'Restaurant Information',
    label: 'Restaurant Status',
    fieldKey: 'restaurantStatus',
    fieldType: 'select',
    options: ['pending', 'publish', 'reject'],
    placeholder: 'Select status',
    required: false,
    order: 3,
    visibleTo: ['agent', 'employee'],
    isActive: true,
    isSystemField: false,
  },
  {
    section: 'restaurant_info',
    sectionLabel: 'Restaurant Information',
    label: 'Rating',
    fieldKey: 'rating',
    fieldType: 'number',
    placeholder: '4.0',
    required: false,
    order: 4,
    visibleTo: ['agent', 'employee'],
    isActive: true,
    validation: { min: 0, max: 5 },
  },
  {
    section: 'restaurant_info',
    sectionLabel: 'Restaurant Information',
    label: 'Approx Delivery Time',
    fieldKey: 'approxDeliveryTime',
    fieldType: 'text',
    placeholder: 'e.g., 30-40 mins',
    required: false,
    order: 5,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'restaurant_info',
    sectionLabel: 'Restaurant Information',
    label: 'Approx Price for Two',
    fieldKey: 'approxPriceForTwo',
    fieldType: 'number',
    placeholder: 'e.g., 500',
    required: false,
    order: 6,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'restaurant_info',
    sectionLabel: 'Restaurant Information',
    label: 'Certificate / License Code',
    fieldKey: 'certificateCode',
    fieldType: 'text',
    placeholder: 'Enter certificate or license code',
    required: false,
    order: 7,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'restaurant_info',
    sectionLabel: 'Restaurant Information',
    label: 'Mobile Number',
    fieldKey: 'mobileNumber',
    fieldType: 'text',
    placeholder: 'e.g., 98765 43210',
    required: false,
    order: 8,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'restaurant_info',
    sectionLabel: 'Restaurant Information',
    label: 'Short Description',
    fieldKey: 'shortDescription',
    fieldType: 'textarea',
    placeholder: 'Briefly describe the restaurant',
    required: false,
    order: 9,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'restaurant_info',
    sectionLabel: 'Restaurant Information',
    label: 'Restaurant Services',
    fieldKey: 'services',
    fieldType: 'multi_select',
    options: ['Delivery', 'Dine-In', 'Takeaway', 'Curbside Pickup'],
    placeholder: '',
    required: false,
    order: 10,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'restaurant_info',
    sectionLabel: 'Restaurant Information',
    label: 'Is Pure Veg?',
    fieldKey: 'isPureVeg',
    fieldType: 'boolean',
    placeholder: '',
    required: false,
    order: 11,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'restaurant_info',
    sectionLabel: 'Restaurant Information',
    label: 'Is Popular?',
    fieldKey: 'isPopular',
    fieldType: 'boolean',
    placeholder: '',
    required: false,
    order: 12,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },

  // ====== LOGIN INFO ======
  {
    section: 'login_info',
    sectionLabel: 'Restaurant Login Information',
    label: 'Email Address',
    fieldKey: 'loginEmail',
    fieldType: 'email',
    placeholder: 'Enter login email',
    required: false,
    order: 1,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'login_info',
    sectionLabel: 'Restaurant Login Information',
    label: 'Password',
    fieldKey: 'loginPassword',
    fieldType: 'password',
    placeholder: 'Enter password',
    required: false,
    order: 2,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },

  // ====== CATEGORY INFO ======
  {
    section: 'category_info',
    sectionLabel: 'Restaurant Category Information',
    label: 'Restaurant Categories',
    fieldKey: 'categories',
    fieldType: 'multi_select',
    options: ['North Indian', 'South Indian', 'Chinese', 'Fast Food', 'Desserts', 'Cafe'],
    placeholder: '',
    required: false,
    order: 1,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },

  // ====== ADDRESS INFO ======
  {
    section: 'address_info',
    sectionLabel: 'Restaurant Address Information (Google Maps)',
    label: 'Full Address',
    fieldKey: 'fullAddress',
    fieldType: 'textarea',
    placeholder: 'Enter full address',
    required: true,
    order: 1,
    visibleTo: ['agent', 'employee'],
    isActive: true,
    isSystemField: true,
  },
  {
    section: 'address_info',
    sectionLabel: 'Restaurant Address Information (Google Maps)',
    label: 'Pincode',
    fieldKey: 'pincode',
    fieldType: 'text',
    placeholder: 'Enter pincode',
    required: false,
    order: 2,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'address_info',
    sectionLabel: 'Restaurant Address Information (Google Maps)',
    label: 'Landmark',
    fieldKey: 'landmark',
    fieldType: 'text',
    placeholder: 'Nearby landmark',
    required: false,
    order: 3,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'address_info',
    sectionLabel: 'Restaurant Address Information (Google Maps)',
    label: 'Latitude',
    fieldKey: 'latitude',
    fieldType: 'number',
    placeholder: 'Latitude',
    required: true,
    order: 4,
    visibleTo: ['agent', 'employee'],
    isActive: true,
    isSystemField: true,
  },
  {
    section: 'address_info',
    sectionLabel: 'Restaurant Address Information (Google Maps)',
    label: 'Longitude',
    fieldKey: 'longitude',
    fieldType: 'number',
    placeholder: 'Longitude',
    required: true,
    order: 5,
    visibleTo: ['agent', 'employee'],
    isActive: true,
    isSystemField: true,
  },
  {
    section: 'address_info',
    sectionLabel: 'Restaurant Address Information (Google Maps)',
    label: 'Search Location (Google Places)',
    fieldKey: 'searchLocation',
    fieldType: 'text',
    placeholder: 'Start typing to search location...',
    required: false,
    order: 6,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'address_info',
    sectionLabel: 'Restaurant Address Information (Google Maps)',
    label: 'Map Type',
    fieldKey: 'mapType',
    fieldType: 'select',
    options: ['Map', 'Satellite'],
    placeholder: 'Map',
    required: false,
    order: 7,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },

  // ====== DELIVERY CHARGE TYPE ======
  {
    section: 'delivery_charge_type',
    sectionLabel: 'Select Delivery Charge Type',
    label: 'Delivery Charge Type',
    fieldKey: 'deliveryChargeType',
    fieldType: 'select',
    options: ['fixed', 'dynamic'],
    placeholder: 'Fixed',
    required: false,
    order: 1,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },

  // ====== DELIVERY INFO ======
  {
    section: 'delivery_info',
    sectionLabel: 'Restaurant Delivery Information',
    label: 'Fixed Charge',
    fieldKey: 'fixedCharge',
    fieldType: 'number',
    placeholder: 'e.g., 30',
    required: false,
    order: 1,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'delivery_info',
    sectionLabel: 'Restaurant Delivery Information',
    label: 'Store Charge (Packing / Extra)',
    fieldKey: 'storeCharge',
    fieldType: 'number',
    placeholder: 'e.g., 20',
    required: false,
    order: 2,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'delivery_info',
    sectionLabel: 'Restaurant Delivery Information',
    label: 'Delivery Radius (km)',
    fieldKey: 'deliveryRadius',
    fieldType: 'number',
    placeholder: 'e.g., 5',
    required: false,
    order: 3,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'delivery_info',
    sectionLabel: 'Restaurant Delivery Information',
    label: 'Minimum Order Price',
    fieldKey: 'minimumOrderPrice',
    fieldType: 'number',
    placeholder: 'e.g., 200',
    required: false,
    order: 4,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },

  // ====== COMMISSION INFO ======
  {
    section: 'commission_info',
    sectionLabel: 'Restaurant Admin Commission',
    label: 'Commission Rate (%)',
    fieldKey: 'commissionRate',
    fieldType: 'number',
    placeholder: 'e.g., 10',
    required: false,
    order: 1,
    visibleTo: ['agent', 'employee'],
    isActive: true,
    validation: { min: 0, max: 100 },
  },

  // ====== PAYOUT INFO ======
  {
    section: 'payout_info',
    sectionLabel: 'Restaurant Payout Information',
    label: 'Bank Name',
    fieldKey: 'bankName',
    fieldType: 'text',
    placeholder: 'Enter bank name',
    required: false,
    order: 1,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'payout_info',
    sectionLabel: 'Restaurant Payout Information',
    label: 'Bank Code / IFSC',
    fieldKey: 'bankCode',
    fieldType: 'text',
    placeholder: 'e.g., HDFC0000001',
    required: false,
    order: 2,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'payout_info',
    sectionLabel: 'Restaurant Payout Information',
    label: 'Recipient Name',
    fieldKey: 'recipientName',
    fieldType: 'text',
    placeholder: 'Enter recipient name',
    required: false,
    order: 3,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'payout_info',
    sectionLabel: 'Restaurant Payout Information',
    label: 'Account Number',
    fieldKey: 'accountNumber',
    fieldType: 'text',
    placeholder: 'Enter account number',
    required: false,
    order: 4,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'payout_info',
    sectionLabel: 'Restaurant Payout Information',
    label: 'PayPal ID',
    fieldKey: 'paypalId',
    fieldType: 'text',
    placeholder: 'Enter PayPal ID',
    required: false,
    order: 5,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'payout_info',
    sectionLabel: 'Restaurant Payout Information',
    label: 'UPI ID',
    fieldKey: 'upiId',
    fieldType: 'text',
    placeholder: 'Enter UPI ID',
    required: false,
    order: 6,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },

  // ====== REVIEW INFO (STEP 2) ======
  {
    section: 'review_info',
    sectionLabel: 'Review & Follow-up Details',
    label: 'Next Follow-Up Date',
    fieldKey: 'followUpDate',
    fieldType: 'date',
    placeholder: 'dd-mm-yyyy',
    required: true,
    order: 1,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'review_info',
    sectionLabel: 'Review & Follow-up Details',
    label: 'Convincing Status',
    fieldKey: 'convincingStatus',
    fieldType: 'select',
    options: ['convenience', 'convertible', 'not_convertible'],
    placeholder: 'Select Status',
    required: true,
    order: 2,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'review_info',
    sectionLabel: 'Review & Follow-up Details',
    label: 'Way of Behavior',
    fieldKey: 'behavior',
    fieldType: 'select',
    options: ['excellent', 'good', 'rude'],
    placeholder: 'Select Behavior',
    required: true,
    order: 3,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
  {
    section: 'review_info',
    sectionLabel: 'Review & Follow-up Details',
    label: 'Voice Note (Optional)',
    fieldKey: 'audioUrl',
    fieldType: 'voice',
    placeholder: '',
    required: false,
    order: 4,
    visibleTo: ['agent', 'employee'],
    isActive: true,
  },
];

// ==========================================
// SEED FUNCTION
// ==========================================
const seedFormConfig = async () => {
  try {
    await connectDB();

    console.log('ğŸ”„ Clearing existing form configuration...');
    await VendorFormSection.deleteMany({});
    await VendorFormConfig.deleteMany({});

    console.log('ğŸŒ± Seeding sections...');
    await VendorFormSection.insertMany(sections);
    console.log(`âœ… ${sections.length} sections created`);

    console.log('ğŸŒ± Seeding fields...');
    await VendorFormConfig.insertMany(fields);
    console.log(`âœ… ${fields.length} fields created`);

    console.log('âœ… Form configuration seeded successfully!');
    process.exit(0);
  } catch (error) {
    console.error('âŒ Error seeding form config:', error);
    process.exit(1);
  }
};

// Run seed
seedFormConfig();
